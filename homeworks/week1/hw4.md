## 跟你朋友介紹 Git

菜哥，你來了！上次 h0w 哥教你的 command line 學的還順利嗎？應該是有學會，才會再來問我 Git 的事情吧，我之前學的時候有寫下筆記，我整理一下就分享給妳。

#### 為什麼我們需要 Git

你想一下，當我們在學校做報告的時候，是不是常常因為資料更新，而使得簡報常常有 project.ppt, project2.ppt, final.ppt, final2.ppt 這麼多檔案，其實我們做的這件事，嚴格來說就叫做**版本控制**。

你有沒有覺得用這種做法，其實很不方便，比如說明明只是要交一份簡報，你的電腦可能就有七八個檔案，數量少倒還好，那如果是七八十個呢？不只空佔容量，甚至你也不知道每一個檔案之間的差別是什麼。

再來，在學校做報告時，常常簡報只是一個人負責，不過如果有一天，簡報要兩個人一起做呢？假設你在你的電腦上改動A檔，新創一個B檔，但在另一個人的電腦裡，A檔的內容跟你不一樣，甚至他連B檔都沒有。等到交簡報那一天，連確認最終版本的內容都是一個很複雜的工作。

所以說，這就是為什麼我們需要 Git，Git 就是一個幫助你做版本控制的軟體。

#### Huli 大的比喻

之前上課的時候，Huli 大的比喻對於初心者而言真的很容易理解，我就現學現賣用他的例子來解釋給你聽吧！

**要知道 Git 能幹嘛，你就先想想如果是你會怎麼做版本控制，這樣就會很好理解 Git 的功用。而如果你有想到什麼好功能，但 Git 沒有，這就是你發表意見的好時刻。如果你想到的功能 Git 都已經有，就只能感謝前人的智慧了**

之前在電腦上做報告的時候，你是不是都會把簡報檔案存進一個叫做「期末報告」的資料夾，然後再把每次更新的檔案存進去，可是這樣做你會遇到**第一個問題：不知道每次更新的版本，檔案之間是怎麼搭配。**

想像一下，一開始你在資料夾裡有 A, B, C 三個檔案，然而你在 2020/06/10 這天把 A 改為 A2 ，而這時你決定這個版本不需要 A 檔案，因此在這個時間點，你需要的是 A2, B, C 這三個檔案，可是為了怕以後需要更動，所以還是把 A 檔保存。因此資料夾裡面有的是 A, A2, B, C 四個檔案。比較複雜的情況就不再舉例了。

那麼為了解決問題，最好的方式就是在每一次版本更新時，**就建立一個新的資料夾**，並且把所有需要的檔案都放進去。如果有檔案不參與版本更新，那麼放在原始的資料夾就好。

再來則是**第二個問題，如果在多人協作的時候，不同人修改到同一個資料夾時，該怎麼辦？**

Git 會使用雜湊的方式，簡單來說就是單向的加密，比如說 ``hello > 9as9anq12`` 會變成一串你看不懂的字，來確保大家拿到的資料夾名稱不同，而內部會有一個記錄檔，把所有資料夾歷史紀錄記載在裡面。

#### 基本指令

大概知道 Git 是在幹嘛的之後，我們就來學一些基本指令吧，因為 Git 使用的操作方式是 command line ，所以在 terminal 就可以執行了。

* ``git init``:  
初始化專案的版本控制，會自動新增版本控制所需要的檔案
* ``git status``:  
有事沒事就看一下狀態怎麼樣
* ``git add``:  
決定哪些檔案要加入 git 做版本控制 

	`` git add .`` > 加入所有的檔案

* ``git commit``:  
新建版本  
``git commit -m “first commit”``: ``-m`` 可以直接加上後面的訊息
* ``git log``:  
歷史紀錄  
``git log --online``: 可以簡短地看到 commit 訊息
* ``git checkout``:  
回到過去版本  
``git checkout 版本號``  
``git checkout master``: 到最新的狀態
* ``.gitignore``:  
要忽略的檔案  
``touch . gitignore`` > ``vim . gitignore`` > 輸入要忽略的檔名（使用者個人檔案或是系統檔案）
* ``git commit -am “”``:  
組合技，``git add .`` + ``git commit``

#### 分支（branch）

分支的概念其實就是 Huli 大比喻的新增資料夾，為了應付多支線的開發模式，在每次更新時都先開一條新的分支，以免影響到主要幹線（master）。

比方說你現在正在開發新功能，因此你做了一個 new feature 版本，但同時又發現原版本出現了 bug，你必須先除錯。但尷尬的是，如果你沒有用分支的開發模式，又不可能提前讓 new feature 曝光，這時候你要怎麼辦？

所以如果使用分支，你就可以同時開兩條支線，一條是 new feature，一條是 bug fix。當你修好 bug 後，先讓 bug fix 這條支線 merge 回 master，等到 new feature 開發完畢，也 merge 回 master 就好。

要操作 branch ，主要有下列這些基本指令。

* ``git branch ‘要建立的分支名’``  
``git branch -d ‘要刪除的分支名``   
``git branch -v``: 可看現在有哪些 branch
* ``git checkout branch-name``:  
換到想去的分支底下
* ``git merge``:  
要合併**進來**的分支名  
e.g. ``git merge week1``: 就是在現在的支線中，將 week1 這個分支合併進來
* ``conflict``:  
若改到同一個檔案，要思考最後留下的檔案是哪個  
merge 時出現系統無法自動處理的 conflict 時，手動開啟有衝突的檔案，決定留下什麼部分  
存檔 > ``git commit -am ‘’``

#### Git 與 GitHub

那比起 Git，你是不是更常聽到工程師說什麼 GitHub，傻傻分不清楚。但其實 GitHub 你就想成是一個搜集所有使用者 Git 後的資料夾的平台。因為多人協作專案時，總得有一個地方讓大家共享版本控制吧。

也因為之前的 Git 只是在使用者端操作，現在則是要上傳到遠端，因此又有 push 和 pull 的兩個指令。而有一件事你一定得記清楚，**使用 GitHub 一定要分清楚檔案究竟是在本地端還是雲端**。

![Git 與 GitHub](https://static.coderbridge.com/img/techbridge/images/kdchang/cs101/git-workflow.png)

我就直接跟你說要怎麼把你電腦上的檔案，放到 GitHub 上。

首先，你需要在 GitHub 上新建一個 repository。之後在你想上傳的資料夾開啟 terminal 輸入

`` git remote add origin ‘GitHub 上的 repository 網址’``

將你想上傳的地址，設定成 origin，這樣之後就會把你電腦上的檔案同步到指定 repo 上。

再來，在你每次要把檔案上傳時，輸入 `` git push -u origin master``，將本地的檔案「推」到雲端上。

那既然有「推」就一定會有「拉」吧，「推」的意思就是當你本地的檔案有更新時，要讓雲端上的版本也同步；「拉」的意思也差不多，就是當別人更改你雲端上的版本時，你也需要讓本地的版本同步成雲端的版本，這時就可以使用 ``git pull origin '分支名'``這個指令。

說到這裡應該很清楚了吧，如果還有問題，都可以隨時再問我喔！